#!/usr/bin/env python

from sys import argv, exit
import argparse

parser = argparse.ArgumentParser(description='root to npy file')
parser.add_argument('--treename',help='input TTree name',type=str,default='events')
parser.add_argument('--branchname',help='new branch name',type=str,default=None)
parser.add_argument('--formula',help='formula',type=str,default=None)
parser.add_argument('infile',metavar='input',type=str,nargs='+',help='input file(s) to process')
args = parser.parse_args()

argv = []

import ROOT as root
from PandaCore.Tools.Load import *
from PandaCore.Tools.Misc import *
import PandaCore.Tools.Functions 

Load('PandaCoreTools')
 
ba = root.FormulaBranchAdder()
ba.formula = args.formula 
ba.treeName = args.treename
ba.newBranchName = args.branchname

for fpath in args.infile:
    ba.addBranchToFile(fpath)
